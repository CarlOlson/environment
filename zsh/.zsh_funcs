#!/usr/bin/env zsh

save_alias () {
    if [[ ! -z $1 ]]; then
        echo alias `alias $1` >> $ZSHDIR/.zsh_aliases
    else
        echo 'No alias specified'
        return 1
    fi
}

_save_alias () {
    local aliases=`alias | sed -e 's/=.*//'`
    _arguments "1:alias:($aliases)"
}

compdef _save_alias save_alias

swap-to-home () {
    git config --global user.name "CarlOlson"
    git config --global user.email "CarlOlson@users.noreply.github.com"

    ssh-add -D
    ssh-add $HOME/.ssh/id_rsa
}

copy () {
    if [[ "$OSTYPE" == "linux-gnu" ]]; then
      if [ ! -z "$@" ]; then
        echo $@ | xclip -selection c
      else
        xclip -selection c
      fi
    elif [[ "$OSTYPE" == "darwin"* ]]; then
      if [ ! -z "$@" ]; then
        echo $@ | pbcopy
      else
        pbcopy
      fi
    else
      echo "unknown OS"
    fi
}

spellcheck () {
    echo "$@" | aspell -a list
}

# stolen from co-worker
git_is_clean()
{
    git update-index -q --ignore-submodules --refresh

    # unstaged changes in the working tree
    if ! git diff-files --quiet --ignore-submodules --
    then
        return 1
    fi

    # uncommitted changes in the index
    if ! git diff-index --cached --quiet HEAD --ignore-submodules --
    then
        return 2
    fi

    return 0
}
